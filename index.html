<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1e3a5f">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ </text></svg>">
  <title>ğŸ  å®¶åº­æ—¥å¸¸åº“å­˜</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #1e293b;
      --card-hover: #334155;
      --accent: #3b82f6;
      --accent-light: #60a5fa;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --border: #334155;
      --input-bg: #0f172a;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 16px;
      padding-bottom: 120px;
    }
    .container { max-width: 500px; margin: 0 auto; }
    
    header { text-align: center; padding: 16px 0 20px; }
    h1 { font-size: 22px; margin-bottom: 4px; }
    .subtitle { color: var(--muted); font-size: 12px; }
    
    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 16px;
    }
    .stat-card {
      background: var(--card);
      border-radius: 12px;
      padding: 14px;
      text-align: center;
    }
    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
    }
    .stat-value.warning { color: var(--warning); }
    .stat-value.danger { color: var(--danger); }
    .stat-label {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }
    
    .tabs {
      display: flex;
      gap: 6px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 8px;
      -webkit-overflow-scrolling: touch;
    }
    .tab {
      padding: 10px 14px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      flex-shrink: 0;
      transition: all 0.2s;
    }
    .tab.active {
      background: var(--accent);
      border-color: var(--accent);
    }
    
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    .section {
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
    }
    .section-title {
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--accent-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .section-badge {
      font-size: 11px;
      padding: 4px 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 20px;
      color: var(--muted);
    }
    
    .item-list { display: flex; flex-direction: column; gap: 8px; }
    
    .item {
      background: rgba(255,255,255,0.03);
      border-radius: 10px;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      border: 1px solid rgba(255,255,255,0.05);
      transition: all 0.2s;
    }
    .item.low-stock {
      border-color: var(--warning);
      background: rgba(245, 158, 11, 0.1);
    }
    .item.out-of-stock {
      border-color: var(--danger);
      background: rgba(239, 68, 68, 0.1);
    }
    .item.ok {
      border-color: rgba(34, 197, 94, 0.3);
    }
    
    .item-icon {
      font-size: 22px;
      width: 36px;
      text-align: center;
    }
    .item-info { flex: 1; min-width: 0; }
    .item-name {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    .item-meta {
      font-size: 11px;
      color: var(--muted);
      display: flex;
      gap: 8px;
    }
    .item-meta .suggest { color: var(--accent-light); }
    
    .item-qty {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .qty-btn {
      width: 30px;
      height: 30px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--input-bg);
      color: var(--text);
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .qty-btn:hover { border-color: var(--accent); }
    .qty-btn.minus { color: var(--danger); }
    .qty-btn.plus { color: var(--success); }
    .qty-value {
      font-size: 14px;
      font-weight: 700;
      min-width: 24px;
      text-align: center;
    }
    
    .add-form {
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
    }
    .form-row {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }
    .form-group { flex: 1; }
    .form-group.small { flex: 0 0 70px; }
    .form-label {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
      display: block;
    }
    .form-input, .form-select {
      width: 100%;
      padding: 10px 12px;
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 13px;
    }
    .form-input:focus, .form-select:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .btn-primary {
      background: var(--accent);
      color: white;
      width: 100%;
    }
    .btn-secondary {
      background: var(--border);
      color: var(--text);
    }
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .quick-add {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .quick-btn {
      padding: 8px 12px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
    }
    .quick-btn:hover { border-color: var(--accent); }
    
    .shopping-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    .shopping-item:last-child { border-bottom: none; }
    .shopping-check {
      width: 22px;
      height: 22px;
      border-radius: 6px;
      border: 2px solid var(--border);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .shopping-check.checked {
      background: var(--success);
      border-color: var(--success);
    }
    .shopping-check.checked::after {
      content: 'âœ“';
      color: white;
      font-size: 12px;
    }
    .shopping-text { flex: 1; font-size: 13px; }
    .shopping-text.checked {
      text-decoration: line-through;
      color: var(--muted);
    }
    
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--success);
      color: white;
      padding: 12px 24px;
      border-radius: 30px;
      font-weight: 600;
      font-size: 13px;
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
    }
    .empty-state .emoji { font-size: 48px; margin-bottom: 12px; }

    .alert-card {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(239, 68, 68, 0.15));
      border: 1px solid var(--warning);
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 12px;
    }
    .alert-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--warning);
      margin-bottom: 8px;
    }
    .alert-list {
      font-size: 12px;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ  å®¶åº­æ—¥å¸¸åº“å­˜</h1>
      <p class="subtitle">Dong & Olivia Â· å®šæœŸé‡‡ä¹°ç®¡ç†</p>
    </header>

    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-value" id="totalItems">0</div>
        <div class="stat-label">ç‰©å“ç§ç±»</div>
      </div>
      <div class="stat-card">
        <div class="stat-value warning" id="lowCount">0</div>
        <div class="stat-label">éœ€è¡¥è´§</div>
      </div>
      <div class="stat-card">
        <div class="stat-value danger" id="outCount">0</div>
        <div class="stat-label">å·²ç”¨å®Œ</div>
      </div>
    </div>

    <div id="alertSection" class="alert-card" style="display: none;">
      <div class="alert-title">âš ï¸ éœ€è¦é‡‡ä¹°</div>
      <div class="alert-list" id="alertList"></div>
    </div>

    <div class="tabs">
      <button class="tab active" onclick="showTab('medicine')">ğŸ’Š è¯å“</button>
      <button class="tab" onclick="showTab('hygiene')">ğŸ§´ å«ç”Ÿ</button>
      <button class="tab" onclick="showTab('cleaning')">ğŸ§¹ æ¸…æ´</button>
      <button class="tab" onclick="showTab('kitchen')">ğŸ³ å¨æˆ¿</button>
      <button class="tab" onclick="showTab('other')">ğŸ“¦ å…¶ä»–</button>
      <button class="tab" onclick="showTab('shopping')">ğŸ›’ é‡‡ä¹°</button>
      <button class="tab" onclick="showTab('add')">â• æ·»åŠ </button>
    </div>

    <!-- è¯å“ -->
    <div id="medicine" class="tab-content active">
      <div class="section">
        <div class="section-title">
          <span>ğŸ’Š å¸¸å¤‡è¯å“</span>
          <span class="section-badge" id="medicineCount">0</span>
        </div>
        <div class="item-list" id="medicineList"></div>
      </div>
    </div>

    <!-- å«ç”Ÿç”¨å“ -->
    <div id="hygiene" class="tab-content">
      <div class="section">
        <div class="section-title">
          <span>ğŸ§´ å«ç”Ÿç”¨å“</span>
          <span class="section-badge" id="hygieneCount">0</span>
        </div>
        <div class="item-list" id="hygieneList"></div>
      </div>
    </div>

    <!-- æ¸…æ´ç”¨å“ -->
    <div id="cleaning" class="tab-content">
      <div class="section">
        <div class="section-title">
          <span>ğŸ§¹ æ¸…æ´ç”¨å“</span>
          <span class="section-badge" id="cleaningCount">0</span>
        </div>
        <div class="item-list" id="cleaningList"></div>
      </div>
    </div>

    <!-- å¨æˆ¿ç”¨å“ -->
    <div id="kitchen" class="tab-content">
      <div class="section">
        <div class="section-title">
          <span>ğŸ³ å¨æˆ¿è€—æ</span>
          <span class="section-badge" id="kitchenCount">0</span>
        </div>
        <div class="item-list" id="kitchenList"></div>
      </div>
    </div>

    <!-- å…¶ä»– -->
    <div id="other" class="tab-content">
      <div class="section">
        <div class="section-title">
          <span>ğŸ“¦ å…¶ä»–ç”¨å“</span>
          <span class="section-badge" id="otherCount">0</span>
        </div>
        <div class="item-list" id="otherList"></div>
      </div>
    </div>

    <!-- é‡‡ä¹°æ¸…å• -->
    <div id="shopping" class="tab-content">
      <div class="section">
        <div class="section-title">
          <span>ğŸ›’ é‡‡ä¹°æ¸…å•</span>
          <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 11px;" onclick="generateShoppingList()">åˆ·æ–°</button>
        </div>
        <div id="shoppingList"></div>
      </div>
      <button class="btn btn-success" onclick="clearChecked()">âœ… æ¸…é™¤å·²è´­ä¹°</button>
    </div>

    <!-- æ·»åŠ  -->
    <div id="add" class="tab-content">
      <div class="add-form">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">ç‰©å“åç§°</label>
            <input type="text" class="form-input" id="itemName" placeholder="ä¾‹å¦‚ï¼šPanadol">
          </div>
          <div class="form-group small">
            <label class="form-label">æ•°é‡</label>
            <input type="number" class="form-input" id="itemQty" value="1" min="0">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">åˆ†ç±»</label>
            <select class="form-select" id="itemCategory">
              <option value="medicine">ğŸ’Š è¯å“</option>
              <option value="hygiene">ğŸ§´ å«ç”Ÿç”¨å“</option>
              <option value="cleaning">ğŸ§¹ æ¸…æ´ç”¨å“</option>
              <option value="kitchen">ğŸ³ å¨æˆ¿è€—æ</option>
              <option value="other">ğŸ“¦ å…¶ä»–</option>
            </select>
          </div>
          <div class="form-group small">
            <label class="form-label">å»ºè®®å­˜é‡</label>
            <input type="number" class="form-input" id="itemSuggest" value="1" min="1">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">å•ä½</label>
            <select class="form-select" id="itemUnit">
              <option value="ç›’">ç›’</option>
              <option value="ç“¶">ç“¶</option>
              <option value="åŒ…">åŒ…</option>
              <option value="ä¸ª">ä¸ª</option>
              <option value="å·">å·</option>
              <option value="è¢‹">è¢‹</option>
              <option value="æ”¯">æ”¯</option>
              <option value="ç‰‡">ç‰‡</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">å­˜æ”¾ä½ç½®</label>
            <select class="form-select" id="itemLocation">
              <option value="è¯ç®±">ğŸ’Š è¯ç®±</option>
              <option value="æµ´å®¤æŸœ">ğŸš¿ æµ´å®¤æŸœ</option>
              <option value="æ´—è¡£æˆ¿">ğŸ§º æ´—è¡£æˆ¿</option>
              <option value="å¨æˆ¿">ğŸ³ å¨æˆ¿</option>
              <option value="å‚¨ç‰©é—´">ğŸ“¦ å‚¨ç‰©é—´</option>
              <option value="å…¶ä»–">ğŸ“ å…¶ä»–</option>
            </select>
          </div>
        </div>
        <button class="btn btn-primary" onclick="addItem()">â• æ·»åŠ ç‰©å“</button>
      </div>

      <div class="section">
        <div class="section-title">âš¡ å¿«é€Ÿæ·»åŠ å¸¸ç”¨ç‰©å“</div>
        <div class="quick-add" id="quickAddBtns"></div>
      </div>

      <div class="section">
        <div class="section-title">ğŸ’¾ æ•°æ®ç®¡ç†</div>
        <div style="display: flex; gap: 10px;">
          <button class="btn btn-secondary" style="flex: 1;" onclick="exportData()">ğŸ“¤ å¯¼å‡º</button>
          <button class="btn btn-secondary" style="flex: 1;" onclick="importClick()">ğŸ“¥ å¯¼å…¥</button>
          <button class="btn btn-secondary" style="flex: 1; color: var(--danger);" onclick="resetData()">ğŸ—‘ï¸ é‡ç½®</button>
        </div>
        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // é»˜è®¤ç‰©å“æ•°æ®ï¼ˆæ¾³æ´²30-40å²å¤«å¦»å®¶åº­ï¼‰
    const defaultItems = [
      // è¯å“
      { name: 'Panadol æ­¢ç—›ç‰‡', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸ’Š' },
      { name: 'Nurofen å¸ƒæ´›èŠ¬', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸ’Š' },
      { name: 'æ„Ÿå†’è¯ (Codral)', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸ¤§' },
      { name: 'åˆ›å¯è´´', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸ©¹' },
      { name: 'Dettol æ¶ˆæ¯’æ¶²', category: 'medicine', suggest: 1, unit: 'ç“¶', location: 'è¯ç®±', icon: 'ğŸ§´' },
      { name: 'çƒ«ä¼¤è† (Burnaid)', category: 'medicine', suggest: 1, unit: 'æ”¯', location: 'è¯ç®±', icon: 'ğŸ”¥' },
      { name: 'æ­¢æ³»è¯ (Imodium)', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸ’Š' },
      { name: 'æŠ—è¿‡æ•è¯ (Zyrtec)', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸŒ¸' },
      { name: 'çœ¼è¯æ°´', category: 'medicine', suggest: 1, unit: 'ç“¶', location: 'è¯ç®±', icon: 'ğŸ‘ï¸' },
      { name: 'ä½“æ¸©è®¡', category: 'medicine', suggest: 1, unit: 'ä¸ª', location: 'è¯ç®±', icon: 'ğŸŒ¡ï¸' },
      { name: 'ç»´ç”Ÿç´ C', category: 'medicine', suggest: 1, unit: 'ç“¶', location: 'è¯ç®±', icon: 'ğŸŠ' },
      { name: 'ç»´ç”Ÿç´ D', category: 'medicine', suggest: 1, unit: 'ç“¶', location: 'è¯ç®±', icon: 'â˜€ï¸' },
      { name: 'è‚ èƒƒè¯ (Gaviscon)', category: 'medicine', suggest: 1, unit: 'ç“¶', location: 'è¯ç®±', icon: 'ğŸ’Š' },
      { name: 'æ™•è½¦è¯', category: 'medicine', suggest: 1, unit: 'ç›’', location: 'è¯ç®±', icon: 'ğŸš—' },
      
      // å«ç”Ÿç”¨å“
      { name: 'ç‰™è†', category: 'hygiene', suggest: 2, unit: 'æ”¯', location: 'æµ´å®¤æŸœ', icon: 'ğŸ¦·' },
      { name: 'ç‰™åˆ·', category: 'hygiene', suggest: 4, unit: 'æ”¯', location: 'æµ´å®¤æŸœ', icon: 'ğŸª¥' },
      { name: 'ç‰™çº¿', category: 'hygiene', suggest: 1, unit: 'ç›’', location: 'æµ´å®¤æŸœ', icon: 'ğŸ¦·' },
      { name: 'æ¼±å£æ°´', category: 'hygiene', suggest: 1, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ’§' },
      { name: 'æ´—å‘æ°´', category: 'hygiene', suggest: 2, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      { name: 'æŠ¤å‘ç´ ', category: 'hygiene', suggest: 1, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      { name: 'æ²æµ´éœ²', category: 'hygiene', suggest: 2, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§¼' },
      { name: 'æ´—é¢å¥¶', category: 'hygiene', suggest: 2, unit: 'æ”¯', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      { name: 'é¢éœœ/ä¹³æ¶²', category: 'hygiene', suggest: 2, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      { name: 'é˜²æ™’éœœ', category: 'hygiene', suggest: 2, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'â˜€ï¸' },
      { name: 'å«ç”Ÿå·¾/æ£‰æ¡', category: 'hygiene', suggest: 2, unit: 'åŒ…', location: 'æµ´å®¤æŸœ', icon: 'ğŸ©¹' },
      { name: 'å«ç”Ÿçº¸', category: 'hygiene', suggest: 2, unit: 'åŒ…', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§»' },
      { name: 'é¢å·¾çº¸', category: 'hygiene', suggest: 2, unit: 'ç›’', location: 'å®¢å…', icon: 'ğŸ§»' },
      { name: 'æ£‰ç­¾', category: 'hygiene', suggest: 1, unit: 'ç›’', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§µ' },
      { name: 'æ£‰ç‰‡/åŒ–å¦†æ£‰', category: 'hygiene', suggest: 1, unit: 'åŒ…', location: 'æµ´å®¤æŸœ', icon: 'âšª' },
      { name: 'å‰ƒé¡»åˆ€ç‰‡', category: 'hygiene', suggest: 1, unit: 'ç›’', location: 'æµ´å®¤æŸœ', icon: 'ğŸª’' },
      { name: 'é™¤è‡­å‰‚', category: 'hygiene', suggest: 2, unit: 'æ”¯', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      { name: 'èº«ä½“ä¹³', category: 'hygiene', suggest: 1, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸ§´' },
      
      // æ¸…æ´ç”¨å“
      { name: 'æ´—è¡£æ¶²', category: 'cleaning', suggest: 2, unit: 'ç“¶', location: 'æ´—è¡£æˆ¿', icon: 'ğŸ§º' },
      { name: 'æŸ”é¡ºå‰‚', category: 'cleaning', suggest: 1, unit: 'ç“¶', location: 'æ´—è¡£æˆ¿', icon: 'ğŸŒ¸' },
      { name: 'æ´—æ´ç²¾', category: 'cleaning', suggest: 2, unit: 'ç“¶', location: 'å¨æˆ¿', icon: 'ğŸ§´' },
      { name: 'å¤šåŠŸèƒ½æ¸…æ´å‰‚', category: 'cleaning', suggest: 1, unit: 'ç“¶', location: 'å‚¨ç‰©é—´', icon: 'ğŸ§¹' },
      { name: 'ç»ç’ƒæ¸…æ´å‰‚', category: 'cleaning', suggest: 1, unit: 'ç“¶', location: 'å‚¨ç‰©é—´', icon: 'ğŸªŸ' },
      { name: 'é©¬æ¡¶æ¸…æ´å‰‚', category: 'cleaning', suggest: 1, unit: 'ç“¶', location: 'æµ´å®¤æŸœ', icon: 'ğŸš½' },
      { name: 'æ¶ˆæ¯’æ¹¿å·¾', category: 'cleaning', suggest: 2, unit: 'åŒ…', location: 'å‚¨ç‰©é—´', icon: 'ğŸ§»' },
      { name: 'æµ·ç»µ/ç™¾æ´å¸ƒ', category: 'cleaning', suggest: 1, unit: 'åŒ…', location: 'å¨æˆ¿', icon: 'ğŸ§½' },
      { name: 'æŠ¹å¸ƒ', category: 'cleaning', suggest: 4, unit: 'æ¡', location: 'å¨æˆ¿', icon: 'ğŸ§¹' },
      { name: 'åƒåœ¾è¢‹ (å¤§)', category: 'cleaning', suggest: 1, unit: 'å·', location: 'å‚¨ç‰©é—´', icon: 'ğŸ—‘ï¸' },
      { name: 'åƒåœ¾è¢‹ (å°)', category: 'cleaning', suggest: 1, unit: 'å·', location: 'å‚¨ç‰©é—´', icon: 'ğŸ—‘ï¸' },
      { name: 'æ‹–æŠŠæ›¿æ¢å¤´', category: 'cleaning', suggest: 2, unit: 'ä¸ª', location: 'å‚¨ç‰©é—´', icon: 'ğŸ§¹' },
      
      // å¨æˆ¿è€—æ
      { name: 'ä¿é²œè†œ', category: 'kitchen', suggest: 2, unit: 'å·', location: 'å¨æˆ¿', icon: 'ğŸï¸' },
      { name: 'é”¡ç®”çº¸', category: 'kitchen', suggest: 1, unit: 'å·', location: 'å¨æˆ¿', icon: 'ğŸª©' },
      { name: 'çƒ˜ç„™çº¸', category: 'kitchen', suggest: 1, unit: 'å·', location: 'å¨æˆ¿', icon: 'ğŸ“œ' },
      { name: 'å¨æˆ¿çº¸å·¾', category: 'kitchen', suggest: 2, unit: 'å·', location: 'å¨æˆ¿', icon: 'ğŸ§»' },
      { name: 'æ´—ç¢—æµ·ç»µ', category: 'kitchen', suggest: 3, unit: 'ä¸ª', location: 'å¨æˆ¿', icon: 'ğŸ§½' },
      { name: 'ä¿é²œè¢‹', category: 'kitchen', suggest: 1, unit: 'ç›’', location: 'å¨æˆ¿', icon: 'ğŸ‘œ' },
      { name: 'é£Ÿç‰©å¯†å°è¢‹', category: 'kitchen', suggest: 1, unit: 'ç›’', location: 'å¨æˆ¿', icon: 'ğŸ“¦' },
      
      // å…¶ä»–
      { name: 'ç”µæ±  (AA)', category: 'other', suggest: 1, unit: 'åŒ…', location: 'å‚¨ç‰©é—´', icon: 'ğŸ”‹' },
      { name: 'ç”µæ±  (AAA)', category: 'other', suggest: 1, unit: 'åŒ…', location: 'å‚¨ç‰©é—´', icon: 'ğŸ”‹' },
      { name: 'ç¯æ³¡', category: 'other', suggest: 2, unit: 'ä¸ª', location: 'å‚¨ç‰©é—´', icon: 'ğŸ’¡' },
      { name: 'é›¨ä¼', category: 'other', suggest: 2, unit: 'æŠŠ', location: 'ç„å…³', icon: 'â˜”' },
      { name: 'æ‰‹ç”µç­’', category: 'other', suggest: 1, unit: 'ä¸ª', location: 'å‚¨ç‰©é—´', icon: 'ğŸ”¦' },
      { name: 'èœ¡çƒ›', category: 'other', suggest: 1, unit: 'ç›’', location: 'å‚¨ç‰©é—´', icon: 'ğŸ•¯ï¸' },
      { name: 'Opalå¡', category: 'other', suggest: 2, unit: 'å¼ ', location: 'ç„å…³', icon: 'ğŸ’³' },
    ];

    let inventory = [];
    let shoppingList = [];

    // å¿«é€Ÿæ·»åŠ æŒ‰é’®
    const quickAddItems = [
      { name: 'Panadol', cat: 'medicine', suggest: 1, unit: 'ç›’', loc: 'è¯ç®±' },
      { name: 'å«ç”Ÿçº¸', cat: 'hygiene', suggest: 2, unit: 'åŒ…', loc: 'æµ´å®¤æŸœ' },
      { name: 'æ´—è¡£æ¶²', cat: 'cleaning', suggest: 2, unit: 'ç“¶', loc: 'æ´—è¡£æˆ¿' },
      { name: 'ä¿é²œè†œ', cat: 'kitchen', suggest: 2, unit: 'å·', loc: 'å¨æˆ¿' },
      { name: 'åƒåœ¾è¢‹', cat: 'cleaning', suggest: 1, unit: 'å·', loc: 'å‚¨ç‰©é—´' },
      { name: 'ç‰™è†', cat: 'hygiene', suggest: 2, unit: 'æ”¯', loc: 'æµ´å®¤æŸœ' },
    ];

    document.addEventListener('DOMContentLoaded', () => {
      loadData();
      renderQuickAdd();
      renderAll();
    });

    function loadData() {
      const saved = localStorage.getItem('home-inventory');
      if (saved) {
        inventory = JSON.parse(saved);
      } else {
        // é¦–æ¬¡ä½¿ç”¨ï¼ŒåŠ è½½é»˜è®¤ç‰©å“
        inventory = defaultItems.map((item, i) => ({
          ...item,
          id: Date.now() + i,
          qty: 0 // åˆå§‹æ•°é‡ä¸º0ï¼Œç­‰ç”¨æˆ·ç›˜ç‚¹
        }));
        saveData();
      }
    }

    function saveData() {
      localStorage.setItem('home-inventory', JSON.stringify(inventory));
    }

    function renderQuickAdd() {
      document.getElementById('quickAddBtns').innerHTML = quickAddItems.map(item => 
        `<button class="quick-btn" onclick="quickAdd('${item.name}', '${item.cat}', ${item.suggest}, '${item.unit}', '${item.loc}')">${item.name}</button>`
      ).join('');
    }

    function renderAll() {
      renderInventory();
      renderStats();
      renderAlerts();
      generateShoppingList();
    }

    function renderInventory() {
      const categories = ['medicine', 'hygiene', 'cleaning', 'kitchen', 'other'];
      
      categories.forEach(cat => {
        const items = inventory.filter(i => i.category === cat);
        const list = document.getElementById(`${cat}List`);
        const count = document.getElementById(`${cat}Count`);
        
        count.textContent = items.length;
        
        if (items.length === 0) {
          list.innerHTML = '<div class="empty-state"><p style="font-size: 12px;">æš‚æ— ç‰©å“</p></div>';
          return;
        }

        list.innerHTML = items.map(item => {
          const status = getStatus(item);
          return `
            <div class="item ${status}">
              <div class="item-icon">${item.icon || 'ğŸ“¦'}</div>
              <div class="item-info">
                <div class="item-name">${item.name}</div>
                <div class="item-meta">
                  <span class="suggest">å»ºè®®: ${item.suggest}${item.unit}</span>
                  <span>ğŸ“ ${item.location}</span>
                </div>
              </div>
              <div class="item-qty">
                <button class="qty-btn minus" onclick="updateQty(${item.id}, -1)">âˆ’</button>
                <span class="qty-value">${item.qty}</span>
                <button class="qty-btn plus" onclick="updateQty(${item.id}, 1)">+</button>
              </div>
            </div>
          `;
        }).join('');
      });
    }

    function renderStats() {
      document.getElementById('totalItems').textContent = inventory.length;
      
      const low = inventory.filter(i => i.qty > 0 && i.qty < i.suggest).length;
      const out = inventory.filter(i => i.qty === 0).length;
      
      document.getElementById('lowCount').textContent = low;
      document.getElementById('outCount').textContent = out;
    }

    function renderAlerts() {
      const needBuy = inventory.filter(i => i.qty < i.suggest);
      const section = document.getElementById('alertSection');
      
      if (needBuy.length > 0) {
        document.getElementById('alertList').innerHTML = needBuy.slice(0, 5).map(i => 
          `${i.icon || 'ğŸ“¦'} ${i.name} (æœ‰${i.qty}/${i.suggest})`
        ).join('<br>');
        section.style.display = 'block';
      } else {
        section.style.display = 'none';
      }
    }

    function generateShoppingList() {
      const needBuy = inventory.filter(i => i.qty < i.suggest);
      const list = document.getElementById('shoppingList');
      
      if (needBuy.length === 0) {
        list.innerHTML = '<div class="empty-state"><div class="emoji">âœ…</div><p>åº“å­˜å……è¶³ï¼</p></div>';
        return;
      }

      list.innerHTML = needBuy.map((item, i) => `
        <div class="shopping-item">
          <div class="shopping-check" onclick="toggleCheck(this)"></div>
          <span class="shopping-text">${item.icon || 'ğŸ“¦'} ${item.name} (éœ€è¡¥${item.suggest - item.qty}${item.unit})</span>
        </div>
      `).join('');
    }

    function getStatus(item) {
      if (item.qty === 0) return 'out-of-stock';
      if (item.qty < item.suggest) return 'low-stock';
      return 'ok';
    }

    function updateQty(id, delta) {
      const item = inventory.find(i => i.id === id);
      if (!item) return;
      
      item.qty = Math.max(0, item.qty + delta);
      saveData();
      renderAll();
    }

    function addItem() {
      const name = document.getElementById('itemName').value.trim();
      const qty = parseInt(document.getElementById('itemQty').value) || 0;
      const category = document.getElementById('itemCategory').value;
      const suggest = parseInt(document.getElementById('itemSuggest').value) || 1;
      const unit = document.getElementById('itemUnit').value;
      const location = document.getElementById('itemLocation').value;

      if (!name) {
        showToast('è¯·è¾“å…¥ç‰©å“åç§°', 'warning');
        return;
      }

      inventory.push({
        id: Date.now(),
        name,
        qty,
        category,
        suggest,
        unit,
        location,
        icon: 'ğŸ“¦'
      });

      saveData();
      renderAll();
      
      document.getElementById('itemName').value = '';
      document.getElementById('itemQty').value = '1';
      
      showToast(`å·²æ·»åŠ  ${name}`);
      showTab('medicine');
    }

    function quickAdd(name, cat, suggest, unit, loc) {
      inventory.push({
        id: Date.now(),
        name,
        qty: 0,
        category: cat,
        suggest,
        unit,
        location: loc,
        icon: 'ğŸ“¦'
      });
      saveData();
      renderAll();
      showToast(`å·²æ·»åŠ  ${name}`);
    }

    function toggleCheck(el) {
      el.classList.toggle('checked');
      el.parentElement.querySelector('.shopping-text').classList.toggle('checked');
    }

    function clearChecked() {
      document.querySelectorAll('.shopping-check.checked').forEach(el => {
        el.classList.remove('checked');
        el.parentElement.querySelector('.shopping-text').classList.remove('checked');
      });
      showToast('å·²æ¸…é™¤æ ‡è®°');
    }

    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(tabId).classList.add('active');
    }

    function showToast(msg, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.style.background = type === 'warning' ? 'var(--warning)' : 'var(--success)';
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    function exportData() {
      const data = { inventory, exportedAt: new Date().toISOString() };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `home-inventory-${new Date().toISOString().slice(0,10)}.json`;
      a.click();
      showToast('å·²å¯¼å‡º');
    }

    function importClick() {
      document.getElementById('importFile').click();
    }

    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          if (data.inventory) {
            inventory = data.inventory;
            saveData();
            renderAll();
            showToast('å¯¼å…¥æˆåŠŸ');
          }
        } catch (err) {
          showToast('å¯¼å…¥å¤±è´¥', 'warning');
        }
      };
      reader.readAsText(file);
    }

    function resetData() {
      if (confirm('ç¡®å®šé‡ç½®æ‰€æœ‰æ•°æ®ï¼Ÿå°†æ¢å¤é»˜è®¤ç‰©å“åˆ—è¡¨ã€‚')) {
        localStorage.removeItem('home-inventory');
        loadData();
        renderAll();
        showToast('å·²é‡ç½®');
      }
    }
  </script>
</body>
</html>
